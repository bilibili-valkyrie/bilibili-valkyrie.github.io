!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],c=!0,u=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(i){u=!0,a=i}finally{try{c||null==n.return||n.return()}finally{if(u)throw a}}return o}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n,r,a,o,c){try{var u=e[o](c),i=u.value}catch(l){return void n(l)}u.done?t(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function u(e){o(c,r,a,u,i,"next",e)}function i(e){o(c,r,a,u,i,"throw",e)}u(void 0)}))}}var u=document.createElement("style");u.innerHTML="@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-cyrillic-ext-400-normal.78f525ec.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-cyrillic-400-normal.8dd3b91c.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(data:font/woff2;base64,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) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-greek-400-normal.ede055d1.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-vietnamese-400-normal.fb56f0e0.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-latin-ext-400-normal.4e959d91.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:url(/assets/roboto-latin-400-normal.cc46322d.woff2) format('woff2'),url(/assets/roboto-all-400-normal.55110586.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}",document.head.appendChild(u),System.register(["./vendor-legacy.5b9f6b96.js"],(function(){"use strict";var n,r,o,u,i,l,s,f,m,p,d,g,v,h,w,E,y,b,k,x,A,R,U,C,S,F,I,B,T,D,z,V,O,M,W,j,N,H,q,Q,X,G,P,Y,K,L,J,Z,$,_,ee;return{setters:[function(e){n=e.v,r=e.R,o=e.S,u=e.B,i=e.i,l=e.a,s=e.C,f=e.u,m=e.b,p=e.c,d=e.d,g=e.e,v=e.f,h=e.I,w=e.g,E=e.h,y=e.m,b=e.M,k=e.j,x=e.A,A=e.T,R=e.k,U=e.l,C=e.n,S=e.o,F=e.p,I=e.q,B=e.r,T=e.s,D=e.t,z=e.w,V=e.x,O=e.y,M=e.z,W=e.D,j=e.E,N=e.F,H=e.G,q=e.H,Q=e.J,X=e.K,G=e.L,P=e.N,Y=e.O,K=e.P,L=e.Q,J=e.U,Z=e.V,$=e.W,_=e.X,ee=e.Y}],execute:function(){var te=function(e){var t=e.children,n=r.createRef(),a=function(e){return function(){n.current.closeSnackbar(e)}};return r.createElement(o,{maxSnack:4,preventDuplicate:!0,ref:n,action:function(e){return r.createElement(u,{onClick:a(e),style:{color:"#FFF"}},"关闭")}},t)},ne="https://joli-vin-58133.herokuapp.com/",re="".concat(ne).concat("api"),ae=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={headers:{}},this.token="",this.socket=null}var t,n,r,o,u,s,f;return t=e,(n=[{key:"setToken",value:function(e){this.config={headers:{Authorization:"Bearer ".concat(e)}},this.token=e;var t=i(ne,{path:"/".concat("api","/ws"),auth:{token:"Bearer ".concat(e)},autoConnect:!1});t.connect(),this.socket=t}},{key:"clearToken",value:function(){var e;this.config={headers:{}},this.token="",null===(e=this.socket)||void 0===e||e.off(),this.socket=null}},{key:"get",value:(f=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get("".concat(re).concat(t),this.config);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"post",value:(s=c(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.post("".concat(re).concat(t),n,this.config);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"put",value:(u=c(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.put("".concat(re).concat(t),n,this.config);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"del",value:(o=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.delete("".concat(re).concat(t),this.config);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}])&&a(t.prototype,n),r&&a(t,r),e}()),oe={getUperInfo:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/bili/getUperInfo/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUperSpace:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/bili/getUperSpace/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce={get:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/getStatus/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUpdates:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/getUpdate/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllUpdates:function(){var e=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/getAllUpdate");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/getAllStatus");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/addSubscribe/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),del:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.del("/sub/delSubscribe/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateRead:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.put("/sub/markSubscribeRead/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setLastReadTime:function(){var e=c(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.put("/sub/changeSubscribeReadTime/".concat(t),{lastUpdateJS:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateVideos:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/sub/updateVideos/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateAllVideos:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=ae.socket;n.emit("updateAllSubscribe"),n.on("updateAllSubscribe",(function(t){e(t)})),t&&n.on("updateASubscribe",t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ue=function(e){var n=t(r.useState(!1),2),a=n[0],o=n[1];return r.createElement(s,{style:e.style,onMouseOver:function(){o(!0)},onMouseOut:function(){o(!1)},raised:a},e.children)},ie={login:function(){var e=c(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.post("/login",{username:t,password:n});case 2:return r=e.sent,ae.setToken(r.token),localStorage.setItem("userToken",r.token),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/login/revokeToken");case 2:localStorage.removeItem("userToken");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},le=function(){var e=f().enqueueSnackbar;return{inherit:function(t){e(t,{variant:"default"})},success:function(t){e(t,{variant:"success"})},err:function(t){e(t,{variant:"error"})},warn:function(t){e(t,{variant:"warning"})},info:function(t){e(t,{variant:"info"})}}},se=function(){var e=le(),t=m();return function(n){var r;switch(console.error(n),null===(r=n.response)||void 0===r?void 0:r.status){case 409:e.err("[409] 与已存在资源冲突");break;case 401:e.err("[401] 认证失败"),localStorage.removeItem("userToken"),t.push("/login");break;case 400:e.err("[400] 请求不合法");break;default:e.err(n.message)}switch(n.message){case"Request failed with status code 401":e.err("[401] 认证失败"),localStorage.removeItem("userToken"),t.push("/login")}}},fe=function(){return p()},me=d,pe=g("newVideo/initNewVideos",c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getAllUpdates();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),de=g("newVideo/addNewVideos",function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getUpdates(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=v({name:"newVideo",initialState:[],reducers:{addVideo:function(e,t){e.push(t.payload)}},extraReducers:function(t){t.addCase(pe.pending,(function(){return[]})),t.addCase(pe.fulfilled,(function(t,n){t.push.apply(t,e(n.payload))})),t.addCase(de.fulfilled,(function(t,n){t.push.apply(t,e(n.payload))}))}}).reducer,ve=function(){var e=le(),n=fe(),a=se(),o=t(r.useState(!1),2),u=o[0],i=o[1],l=t(r.useState(0),2),s=l[0],f=l[1],m=function(){var t=c(regeneratorRuntime.mark((function t(r){var o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,i(!0),f(0),t.next=6,ce.updateAllVideos((function(t){e.success("".concat(t.name," 新增 ").concat(t.updates," 条视频")),f(100*t.progress)}));case 6:o=t.sent,c=o.totalUpdates,e.success("共更新 ".concat(c," 条视频")),i(!1),n(pe()).unwrap().catch((function(e){a(e)})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),a(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return r.createElement("div",{style:{position:"relative"}},r.createElement(h,{onClick:m,color:"inherit",disabled:u},r.createElement(w,null)),u&&r.createElement(E,{variant:"determinate",value:s,color:"inherit",size:24,style:{position:"absolute",top:12,left:12}}))},he=y((function(e){return k({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={display:"block"},n=e.breakpoints.up("sm"),r={display:"block"},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),section:{display:"flex"}});var t,n,r})),we=function(){var e=d((function(e){return e.newVideo}));return r.createElement(h,{"aria-label":"".concat(e.length," 个新视频"),color:"inherit"},r.createElement(F,{badgeContent:e.length,color:"secondary"},r.createElement(I,null)))},Ee=r.forwardRef((function(e,t){var n=m(),a=se();if(r.useEffect((function(){e.setToken(localStorage.getItem("userToken"))}),[e]),null===e.token)return r.createElement(b,{onClick:function(){n.push("/login")}},"登录/注册");ae.setToken(e.token);return r.createElement(b,{onClick:function(t){t.preventDefault(),localStorage.removeItem("userToken"),e.setToken(null);try{ie.logout()}catch(r){a(r)}ae.clearToken(),n.push("/login"),e.handleMenuClose()}},"退 出")})),ye=function(e){var n=e.title,a=he(),o=t(r.useState(null),2),c=o[0],u=o[1],i=t(r.useState(null),2),l=i[0],s=i[1],f=Boolean(c),m=function(){u(null)},p="primary-search-account-menu",d=r.createElement(B,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:p,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:m},r.createElement(Ee,{handleMenuClose:m,token:l,setToken:s}));return r.createElement("div",{className:a.grow,style:{marginBottom:72}},r.createElement(x,{position:"fixed"},r.createElement(A,null,r.createElement(h,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.createElement(R,null)),r.createElement(U,{className:a.title,variant:"h6",noWrap:!0},n),r.createElement("div",{className:a.grow}),r.createElement("div",{className:a.section},ae.token&&r.createElement(r.Fragment,null,r.createElement(ve,null),r.createElement(we,null)),r.createElement(h,{edge:"end","aria-label":"account of current user","aria-controls":p,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},null===l?r.createElement(C,null):r.createElement(S,null))))),d)},be=function(){var e,n=t(r.useState(""),2),a=n[0],o=n[1],i=t(r.useState(),2),l=i[0],s=i[1],f=se(),p=m(),d=le(),g=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,oe.getUperInfo(a);case 4:n=e.sent,r=n.data,o={mid:r.card.mid,name:r.card.name,follower:r.follower,sign:r.card.sign,archiveCount:r.archive_count},s(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(ye,{title:"新增订阅"}),r.createElement(T,{maxWidth:"xs"},r.createElement(ue,null,r.createElement(D,null,r.createElement(h,{style:{position:"absolute"},onClick:function(e){e.preventDefault(),p.push("/")}},r.createElement(z,null)),r.createElement(V,{container:!0,justify:"center"},r.createElement(V,{item:!0},r.createElement(U,{variant:"h4",align:"center",gutterBottom:!0},"新增订阅")),r.createElement(V,{item:!0,style:{width:"100%"}},r.createElement(O,{fullWidth:!0,variant:"outlined",label:"up 主 UID",value:a,onChange:function(e){s(void 0),o(e.target.value)},InputProps:{endAdornment:r.createElement(M,{position:"end"},r.createElement(h,{size:"small",onClick:g},r.createElement(W,null)))}})),l&&r.createElement(r.Fragment,null,r.createElement(V,{item:!0,style:{width:"100%"}},r.createElement(U,{gutterBottom:!0},"请确认以下信息："),r.createElement(j,null,r.createElement(U,{component:"div"},r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"UID："),r.createElement("td",null,l.mid)),r.createElement("tr",null,r.createElement("td",null,"昵称："),r.createElement("td",null,l.name)),r.createElement("tr",null,r.createElement("td",null,"关注："),r.createElement("td",null,l.follower)),r.createElement("tr",null,r.createElement("td",null,"签名："),r.createElement("td",null,l.sign)),r.createElement("tr",null,r.createElement("td",null,"视频数："),r.createElement("td",null,l.archiveCount))))))),r.createElement(V,{item:!0},r.createElement(u,{variant:"outlined",color:"primary",onClick:(e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ce.add(a);case 4:d.success("关注成功！"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),f(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(t){return e.apply(this,arguments)})},"提交"))))))))},ke=function(e){var t=e.icon,n=e.content;return r.createElement(V,{item:!0},r.createElement(U,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",style:{display:"flex",alignItems:"center"}},t,n))},xe=function(e){var t=e.video;return r.createElement(r.Fragment,null,r.createElement(s,null,r.createElement(j,{onClick:function(){setTimeout((function(){window.open("http://www.bilibili.com/video/".concat(t.bvid))}),200)},style:{height:"100%"}},r.createElement(D,null,r.createElement(U,{variant:"body2",gutterBottom:!0},t.title),r.createElement(V,{container:!0,spacing:1,direction:"row",justify:"center"},r.createElement(ke,{content:t.play,icon:r.createElement(N,{fontSize:"small"})}),r.createElement(ke,{content:t.comment,icon:r.createElement(H,{fontSize:"small"})}),r.createElement(ke,{content:t.review,icon:r.createElement(q,{fontSize:"small"})}),r.createElement(ke,{content:t.bvid,icon:r.createElement(Q,{fontSize:"small"})}))))))},Ae=function(){var e=d((function(e){return e.newVideo}));return r.createElement(V,{container:!0,spacing:1},e.map((function(e){return r.createElement(V,{item:!0,key:e.id},r.createElement(xe,{video:e}))})))},Re=g("uper/initUpers",c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getAll();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),Ue=v({name:"uper",initialState:[],reducers:{addUper:function(e,t){e.push(t.payload)}},extraReducers:function(e){e.addCase(Re.pending,(function(){return[]})),e.addCase(Re.fulfilled,(function(e,t){t.payload.forEach((function(t){e.push(t)}))}))}}).reducer,Ce=function(e){var t=e.children,n=e.onClick;return r.createElement(V,{item:!0},r.createElement(u,{variant:"outlined",onClick:n,style:{height:32}},t))},Se=function(e){var t=e.uper,n=e.setOver;return r.createElement(s,{style:{minHeight:100}},r.createElement(j,{onClick:function(){n(!0)},style:{minHeight:100}},r.createElement(D,null,r.createElement(V,{container:!0,justify:"center"},r.createElement(U,{variant:"h5",align:"center"},t.card.name)))))},Fe=function(e){var t=e.uper,n=e.setOver,a=fe(),o=se(),u=le(),i=function(){var e=c(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ce.updateRead(t.id);case 3:a(pe()).unwrap().catch((function(e){o(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=c(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ce.del(t.id);case 3:u.info("删除成功"),a(pe()).unwrap().catch((function(e){o(e)})),a(Re()).unwrap().catch((function(e){o(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=c(regeneratorRuntime.mark((function e(n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ce.updateVideos(t.id);case 3:r=e.sent,c=r.updates,u.success("".concat(t.card.name," 新增 ").concat(c," 条视频")),a(de(t.id)).unwrap().catch((function(e){o(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=c(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),window.open("https://space.bilibili.com/".concat(t.mid));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement(G,{onClickAway:function(){n(!1)}},r.createElement(s,{raised:!0,style:{minHeight:100}},r.createElement(D,{style:{padding:4}},r.createElement(V,{container:!0,justify:"center",alignItems:"center",spacing:1,style:{minHeight:100}},r.createElement(Ce,{onClick:i},"已读"),r.createElement(Ce,{onClick:f},"更新"),r.createElement(Ce,{onClick:m},"空间"),r.createElement(Ce,{onClick:l},"取关")))))},Ie=function(e){var n=e.uper,a=t(r.useState(!1),2),o=a[0],c=a[1];return r.createElement(V,{item:!0,xs:12,md:4,lg:2},o?r.createElement(Fe,{uper:n,setOver:c}):r.createElement(Se,{uper:n,setOver:c}))},Be=function(){var e=m(),t=me((function(e){return e.uper}));return r.createElement(V,{container:!0,spacing:1},t.map((function(e){return r.createElement(Ie,{uper:e,key:e.id})})),r.createElement(V,{item:!0},r.createElement(ue,{style:{width:"100%",height:"100%"}},r.createElement(j,{onClick:function(t){t.preventDefault(),e.push("/addSubscribe")}},r.createElement(D,null,r.createElement(X,{style:{height:64,width:64,color:"rgba(0, 0, 0, 0.54)"}}))))))},Te=function(){var e=m(),t=fe(),n=se();return r.useEffect((function(){var r=localStorage.getItem("userToken");null===r?e.push("/login"):(ae.setToken(r),t(pe()).unwrap().catch((function(e){n(e)})),t(Re()).unwrap().catch((function(e){n(e)})))}),[]),r.createElement(r.Fragment,null,r.createElement(ye,{title:"瓦尔基里"}),r.createElement(U,{gutterBottom:!0},"页面右上角刷新键可获取全部更新",r.createElement("br",null),"点击up主卡片进行单独操作"),r.createElement(V,{container:!0,spacing:1},r.createElement(Be,null),r.createElement(Ae,null)))},De={signUp:function(){var e=c(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.post("/users",{username:t,name:n,password:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),del:function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.del("/users?paword=".concat(P.encode(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){var e=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/users");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getByName:function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),modify:function(){var e=c(regeneratorRuntime.mark((function e(t,n,r,a){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={oldPassword:t,username:n,name:r,newPassword:a},e.next=3,ae.put("/users",o);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},ze=Y({switchBase:{color:"#f50057","&$checked":{color:"#3f51b5"},"&$checked + $track":{backgroundColor:"#7986cb"}},checked:{},track:{}})(K),Ve=function(){var e=t(r.useState(""),2),n=e[0],a=e[1],o=t(r.useState(""),2),i=o[0],l=o[1],s=t(r.useState(""),2),f=s[0],p=s[1],d=t(r.useState(!0),2),g=d[0],v=d[1],h=m(),w=se(),E=function(){var e=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ie.login(n,f);case 4:r=e.sent,ae.setToken(r.token),localStorage.setItem("userToken",r.token),h.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),w(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,De.signUp(n,i,f);case 4:return e.next=6,ie.login(n,f);case 6:r=e.sent,ae.setToken(r.token),localStorage.setItem("userToken",r.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),w(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.createElement("div",{style:{background:"url(".concat("/assets/background.a47ead67.png",") center center no-repeat fixed"),backgroundSize:"cover",height:"100vh",width:"100%",position:"absolute",left:0,top:0,right:0,bottom:0}},r.createElement(ye,{title:g?"瓦尔基里-登录":"瓦尔基里-注册"}),r.createElement(T,{maxWidth:"xs"},r.createElement(ue,{style:{marginTop:128}},r.createElement(D,null,r.createElement(U,{variant:"h4",align:"center",gutterBottom:!0},g?"登录":"注册"),r.createElement(V,{container:!0,alignContent:"center",spacing:1,justify:"center"},r.createElement(U,{component:"div"},r.createElement(V,{component:"label",container:!0,alignItems:"center",spacing:1},r.createElement(V,{item:!0},"注册"),r.createElement(V,{item:!0},r.createElement(ze,{checked:g,color:"primary",onChange:function(e){v(e.target.checked)}})),r.createElement(V,{item:!0},"登录"))),r.createElement(V,{item:!0,style:{width:"100%"}},r.createElement(O,{fullWidth:!0,variant:"outlined",type:"username",label:"用户名",autoComplete:"username",value:n,onChange:function(e){return a(e.target.value)}})),!g&&r.createElement(V,{item:!0,style:{width:"100%"}},r.createElement(O,{fullWidth:!0,variant:"outlined",label:"昵称",autoComplete:"nickname",value:i,onChange:function(e){return l(e.target.value)}})),r.createElement(V,{item:!0,style:{width:"100%"}},r.createElement(O,{fullWidth:!0,variant:"outlined",type:"password",label:"密码",autoComplete:g?"current-password":"new-password",value:f,onChange:function(e){return p(e.target.value)}})),g?r.createElement(V,{item:!0},r.createElement(u,{color:"primary",variant:"contained",onClick:E},"登录")):r.createElement(V,{item:!0},r.createElement(u,{color:"secondary",variant:"contained",onClick:y},"注册")))))))},Oe=L({reducer:{newVideo:ge,uper:Ue}}),Me=function(){return r.createElement(J,{store:Oe},r.createElement(te,null,r.createElement(Z,null,r.createElement($,null,r.createElement(_,{path:"/login"},r.createElement(Ve,null)),r.createElement(_,{path:"/addSubscribe"},r.createElement(be,null)),r.createElement(_,{path:"/"},r.createElement(Te,null))))))};!function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.immediate,a=void 0!==r&&r,o=(t.onNeedRefresh,t.onOfflineReady),u=function(){var e=c(regeneratorRuntime.mark((function e(){var t=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!(t.length>0&&void 0!==t[0])||t[0];case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();"serviceWorker"in navigator&&((e=new n("/sw.js",{scope:"/"})).addEventListener("activated",(function(e){e.isUpdate?window.location.reload():null==o||o()})),e.register({immediate:a}).then((function(e){return e})))}({onOfflineReady:function(){}}),ee.render(r.createElement(Me,null),document.getElementById("root"))}}}))}();
